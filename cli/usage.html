<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="CLI Reference" href="api.html" /><link rel="prev" title="CLI Interface" href="index.html" />

    <meta name="generator" content="sphinx-3.0.3, furo 2021.03.20.beta30"/>
        <title>CLI Usage - MC2 Client documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: orange;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">MC<sup>2</sup> Client  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">MC<sup>2</sup> Client  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Global Configuration</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python/index.html">Python Interface</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../python/usage.html">Python Package Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/api.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">CLI Interface</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">CLI Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">CLI Reference</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="cli-usage">
<h1>CLI Usage<a class="headerlink" href="#cli-usage" title="Permalink to this headline">¶</a></h1>
<p>Below, you’ll find guides on how to use the MC<sup>2</sup> Client command line interface. The CLI is dependent on the <code class="docutils literal notranslate"><span class="pre">mc2client</span></code> Python package, so ensure that you’ve first installed the Python package by trying to import <code class="docutils literal notranslate"><span class="pre">mc2client</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mc2client</span> <span class="k">as</span> <span class="nn">oc</span>
</pre></div>
</div>
<section id="configuring-mc2-client">
<h2>Configuring MC<sup>2</sup> Client<a class="headerlink" href="#configuring-mc2-client" title="Permalink to this headline">¶</a></h2>
<p>Before running anything, you’ll need to create a YAML file specifying certain parameters, e.g. the paths to your keys, what to check during remote attestation, and the path to your Azure configuration. Exact instructions on configuration are <a class="reference internal" href="../config.html"><span class="doc">here</span></a>.</p>
<p>Once you’ve populated a YAML file with your desired parameters, set the <code class="docutils literal notranslate"><span class="pre">MC2_CONFIG</span></code> environment variable to the path to your configuration file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">MC2_CONFIG</span><span class="o">=</span>/path/to/config/yaml
</pre></div>
</div>
</section>
<section id="encrypting-and-uploading-data">
<h2>Encrypting and Uploading Data<a class="headerlink" href="#encrypting-and-uploading-data" title="Permalink to this headline">¶</a></h2>
<p>MC<sup>2</sup> Client will use the symmetric key you specified during configuration to encrypt your sensitive data and decrypt sensitive results outputted by the MC<sup>2</sup> compute services. If you don’t yet have a symmetric key, see the above section on <a class="reference internal" href="../python/usage.html#generating-keys"><span class="std std-ref">Generating Keys</span></a>.</p>
<p>MC<sup>2</sup> Client encrypts your data into two different formats, depending on which compute service you plan to use: <code class="docutils literal notranslate"><span class="pre">opaque</span></code> or <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code>. <code class="docutils literal notranslate"><span class="pre">opaque</span></code> format is for the Opaque SQL compute service, while <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> is for Secure XGBoost. You should specify the data you will use during computation (and hence should encrypt and upload) and the nodes you’re using for computation, i.e., where you want to upload your data during the <a class="reference internal" href="../config.html"><span class="doc">configuration step</span></a>.</p>
<p>MC<sup>2</sup> Client will encrypt and upload your data in one step through the command line.</p>
<section id="secure-xgboost-format">
<h3>Secure XGBoost Format<a class="headerlink" href="#secure-xgboost-format" title="Permalink to this headline">¶</a></h3>
<p>If you plan on using the Secure XGBoost compute service, you’ll want to encrypt your data in <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> format. To do so, specify the <code class="docutils literal notranslate"><span class="pre">--xgb</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Encrypt data in `securexgboost` format and upload it</span>
<span class="c1"># to a location readable by the Secure XGBoost compute service.</span>
mc2 upload --xgb
</pre></div>
</div>
</section>
<section id="opaque-sql-format">
<h3>Opaque SQL Format<a class="headerlink" href="#opaque-sql-format" title="Permalink to this headline">¶</a></h3>
<p>If you plan on using the Opaque SQL compute service, you’ll want to encrypt your data in <code class="docutils literal notranslate"><span class="pre">opaque</span></code> format – specify the <code class="docutils literal notranslate"><span class="pre">--sql</span></code> option. For this format, you’ll first need to create a file specifying the schema of the data.</p>
<p>The schema must be written in the following format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>col_1_name:col_1_type,col_2_name:col_2_type,col_3_name:col_3_type
</pre></div>
</div>
<p>For example, if your data has 3 columns, named <code class="docutils literal notranslate"><span class="pre">age</span></code> of type <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">rank</span></code> of type <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">animal</span></code> of type <code class="docutils literal notranslate"><span class="pre">string</span></code>, the schema would look like the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>age:integer,rank:float,animal:string
</pre></div>
</div>
<p>Currently, MC<sup>2</sup> Client supports the following types with Opaque SQL:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">long</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
</ul>
<p>If the data in your column is not of any of these types, MC<sup>2</sup> Client will by default encrypt it as a string type.</p>
<p><strong>Note</strong>: Currently, you must include a header with all data you’ll use with Opaque SQL. The header should be a comma-separated list of column names.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Encrypt data in `opaque` format</span>
mc2 upload --sql
</pre></div>
</div>
</section>
</section>
<section id="running-computation">
<h2>Running Computation<a class="headerlink" href="#running-computation" title="Permalink to this headline">¶</a></h2>
<p>To perform computation, first write a script that contains the Python (in the case of Secure XGBoost) or the Scala (in the case of Opaque SQL) code that you want to run. Example scripts can be found in <code class="docutils literal notranslate"><span class="pre">demo/</span></code>. Specify this script in the <a class="reference internal" href="../config.html"><span class="doc">configuration YAML</span></a>. You can then remotely run this script using MC<sup>2</sup> Client.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run your Secure XGBoost or Opaque SQL computation</span>
mc2 run --xgb/--sql
</pre></div>
</div>
<p>As part of this step, MC<sup>2</sup> Client will perform remote attestation to authenticate all enclaves and ensure that the expected code has been properly loaded into each enclave. Attestation parameters, e.g. what values to check, are also specified during <a class="reference internal" href="../config.html"><span class="doc">configuration</span></a>. MC<sup>2</sup> Client will retrieve these parameters under the hood and attest accordingly.</p>
</section>
<section id="decrypting-and-downloading-results">
<h2>Decrypting and Downloading Results<a class="headerlink" href="#decrypting-and-downloading-results" title="Permalink to this headline">¶</a></h2>
<p>Once your computation has finished, you can download and, optionally, decrypt the results. All compute services included with MC<sup>2</sup> will only save encrypted results to disk, i.e. it will not expose any results in plaintext. You should specify the source of the transfer, i.e. the paths of the results on the cloud, and the destination of the transfer, i.e. the local directory to which you want to save results, during <a class="reference internal" href="../config.html"><span class="doc">configuration</span></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve results from the first worker node,</span>
<span class="c1"># as specified during configuration.</span>
mc2 download

<span class="c1"># Optionally, if you want to also decrypt results</span>
<span class="c1"># encrypted during Secure XGBoost computation,</span>
<span class="c1"># specify the --xgb flag.</span>
mc2 download --xgb

<span class="c1"># Optionally, if you want to also decrypt results</span>
<span class="c1"># encrypted during Opaque SQL computation,</span>
<span class="c1"># specify the --sql flag.</span>
mc2 download --sql
</pre></div>
</div>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">CLI Reference</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">CLI Interface</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, MC2 Contributors
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/cli/usage.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CLI Usage</a><ul>
<li><a class="reference internal" href="#configuring-mc2-client">Configuring MC<sup>2</sup> Client</a></li>
<li><a class="reference internal" href="#encrypting-and-uploading-data">Encrypting and Uploading Data</a><ul>
<li><a class="reference internal" href="#secure-xgboost-format">Secure XGBoost Format</a></li>
<li><a class="reference internal" href="#opaque-sql-format">Opaque SQL Format</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-computation">Running Computation</a></li>
<li><a class="reference internal" href="#decrypting-and-downloading-results">Decrypting and Downloading Results</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>