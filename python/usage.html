
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Python Package Usage &#8212; MC&lt;sup&gt;2&lt;/sup&gt; Client 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Python Interface" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="python-package-usage">
<h1>Python Package Usage<a class="headerlink" href="#python-package-usage" title="Permalink to this headline">¶</a></h1>
<p>Below, you’ll find guides on how to use the MC<sup>2</sup> Client Python package. Ensure that you’ve first installed the Python package by trying to import <code class="docutils literal notranslate"><span class="pre">mc2client</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python3
Python <span class="m">3</span>.6.9 <span class="o">(</span>default, Dec <span class="m">30</span> <span class="m">2020</span>, <span class="m">10</span>:13:08<span class="o">)</span>
<span class="o">[</span>Clang <span class="m">12</span>.0.0 <span class="o">(</span>clang-1200.0.32.28<span class="o">)]</span> on darwin
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.

&gt;&gt;&gt; import mc2client as mc2
</pre></div>
</div>
<div class="section" id="configuring-mc2-client">
<h2>Configuring MC<sup>2</sup> Client<a class="headerlink" href="#configuring-mc2-client" title="Permalink to this headline">¶</a></h2>
<p>Before running anything, you’ll need to create a YAML file specifying certain parameters, e.g. the paths to your keys, what to check during remote attestation, and the path to your Azure configuration. Exact instructions on configuration are <a class="reference internal" href="../config.html"><span class="doc">here</span></a>.</p>
<p>Once you’ve populated a YAML file with your desired parameters, set the path to your configuration file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># An example config is at `demo/mc2.yaml`</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="s2">&quot;/path/to/config.yaml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-keys">
<h2>Generating Keys<a class="headerlink" href="#generating-keys" title="Permalink to this headline">¶</a></h2>
<p>If you don’t already have a keypair and/or a symmetric key, you’ll want to generate them so that you can interact with MC<sup>2</sup> cloud compute services in a cryptographically secure manner. MC<sup>2</sup> uses your certificate and private key to authenticate you to MC<sup>2</sup> compute services, and uses your symmetric key to encrypt your data to ensure that the cloud doesn’t see it in plaintext..</p>
<p>MC<sup>2</sup> Client provides a function to generate a certificate and corresponding private key, and a function to generate a symmetric key. You should have specified paths for your certificate, private key, and symmetric key during configuration. These functions will output the certificate, private key, and symmetric key to these paths.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate a certificate and corresponding private key</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">generate_keypair</span><span class="p">()</span>

<span class="c1"># Generate a symmetric key</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">generate_symmetric_key</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="encrypting-and-decrypting-files">
<h2>Encrypting and Decrypting Files<a class="headerlink" href="#encrypting-and-decrypting-files" title="Permalink to this headline">¶</a></h2>
<p>MC<sup>2</sup> Client will use the symmetric key you specified during configuration to encrypt your sensitive data and decrypt sensitive results outputted by the MC<sup>2</sup> compute services. If you don’t yet have a symmetric key, see the above section on <a class="reference internal" href="#generating-keys"><span class="std std-ref">Generating Keys</span></a>.</p>
<p>MC<sup>2</sup> Client encrypts your data into two different formats, depending on which compute service you plan to use: <code class="docutils literal notranslate"><span class="pre">opaque</span></code> or <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code>. <code class="docutils literal notranslate"><span class="pre">opaque</span></code> format is for the Opaque SQL compute service, while <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> is for Secure XGBoost.</p>
<div class="section" id="securexgboost-format">
<h3><code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> Format<a class="headerlink" href="#securexgboost-format" title="Permalink to this headline">¶</a></h3>
<p>If you plan on using the Secure XGBoost compute service, you’ll want to encrypt your data in <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> format. For this format, you’ll need to specify the path to the plaintext data and a path for MC<sup>2</sup> Client to output the encrypted data, as well as the encryption format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Encrypt data in `securexgboost` format</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">encrypt_data</span><span class="p">(</span>
    <span class="s2">&quot;/path/to/plaintext/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/path/to/output/encrypted/data&quot;</span><span class="p">,</span>
    <span class="n">enc_format</span><span class="o">=</span><span class="s2">&quot;securexgboost&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To decrypt data encrypted in <code class="docutils literal notranslate"><span class="pre">securexgboost</span></code> format, you’ll need to specify the path to the encrypted data, a path for MC<sup>2</sup> Client to output the decrypted data, and the encryption format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Decrypt data encrypted in `securexgboost` format</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">decrypt_data</span><span class="p">(</span>
    <span class="s2">&quot;/path/to/encrypted/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/path/to/decrypted/data&quot;</span><span class="p">,</span>
    <span class="n">enc_format</span><span class="o">=</span><span class="s2">&quot;securexgboost&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="opaque-format">
<h3><code class="docutils literal notranslate"><span class="pre">opaque</span></code> Format<a class="headerlink" href="#opaque-format" title="Permalink to this headline">¶</a></h3>
<p>If you plan on using the Opaque SQL compute service, you’ll want to encrypt your data in <code class="docutils literal notranslate"><span class="pre">opaque</span></code> format. For this format, you’ll first need to create a file specifying the schema of the data.</p>
<p>The schema must be written in the following format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>col_1_name:col_1_type,col_2_name:col_2_type,col_3_name:col_3_type
</pre></div>
</div>
<p>For example, if your data has 3 columns, named <code class="docutils literal notranslate"><span class="pre">age</span></code> of type <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">rank</span></code> of type <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">animal</span></code> of type <code class="docutils literal notranslate"><span class="pre">string</span></code>, the schema would look like the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>age:integer,rank:float,animal:string
</pre></div>
</div>
<p>Currently, Opaque SQL supports the following types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">long</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
</ul>
<p>If the data in your column is not of any of these types, MC<sup>2</sup> Client will by default encrypt it as a string type.</p>
<p>To encrypt the data, you’ll need to specify the path to the plaintext data, a path for MC<sup>2</sup> Client to output the encrypted data, the path to the schema of the data, and the encryption format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Encrypt data in `opaque` format</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">encrypt_data</span><span class="p">(</span>
    <span class="s2">&quot;/path/to/plaintext/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/path/to/output/encrypted/data&quot;</span><span class="p">,</span>
    <span class="n">schema_file</span><span class="o">=</span><span class="s2">&quot;/path/to/schema&quot;</span><span class="p">,</span>
    <span class="n">enc_format</span><span class="o">=</span><span class="s2">&quot;opaque&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To decrypt data encrypted in <code class="docutils literal notranslate"><span class="pre">opaque</span></code> format, you’ll need to specify the path to the encrypted data, a path for MC<sup>2</sup> Client to output the decrypted data, and the encryption format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Decrypt data encrypted in `opaque` format</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">decrypt_data</span><span class="p">(</span>
    <span class="s2">&quot;/path/to/encrypted/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/path/to/decrypted/data&quot;</span><span class="p">,</span>
    <span class="n">enc_format</span><span class="o">=</span><span class="s2">&quot;opaque&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="remote-attestation">
<h2>Remote Attestation<a class="headerlink" href="#remote-attestation" title="Permalink to this headline">¶</a></h2>
<p>Before using MC<sup>2</sup> compute services, you’ll want to attest the MC<sup>2</sup> cluster in the cloud to authenticate all the enclaves and to ensure that the expected code has been properly loaded into each enclave. Attestation parameters, e.g. what values to check, are specified during <a class="reference internal" href="../config.html"><span class="doc">configuration</span></a>. MC<sup>2</sup> Client will retrieve these parameters under the hood and attest accordingly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remotely attest the MC2 cluster</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">attest</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="data-transfer">
<h2>Data Transfer<a class="headerlink" href="#data-transfer" title="Permalink to this headline">¶</a></h2>
<p>Once you’ve encrypted your data, you can upload your encrypted data to the worker nodes specified in your config YAML.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Upload your data to your worker nodes</span>
<span class="c1"># Opaque Client will transfer your data to the IPs</span>
<span class="c1"># specified in config YAML</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
    <span class="s2">&quot;/local/path/to/encrypted/data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/name/of/file/on/server&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Similarly, you can download any data outputted by MC<sup>2</sup> compute services to your Azure containers. MC<sup>2</sup> compute services will, before outputting data, encrypt the data with your symmetric key (as specified during configuration), so any data outputted to the Azure containers will be encrypted.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download encrypted data</span>
<span class="c1"># MC2 Client will look for the data</span>
<span class="c1"># specified in the `cloud` --&gt; `results`</span>
<span class="c1"># section in the config YAML</span>
<span class="n">mc2</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
    <span class="s2">&quot;/file/to/fetch/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/local/path/to/download/data/to&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">MC<sup>2</sup> Client</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Global Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python Interface</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python Package Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI Interface</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Python Interface</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Python Interface</a></li>
      <li>Next: <a href="api.html" title="next chapter">API Reference</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, MC<sup>2</sup> Contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/python/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>